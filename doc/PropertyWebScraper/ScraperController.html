<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: PropertyWebScraper::ScraperController
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "PropertyWebScraper::ScraperController";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../PropertyWebScraper.html" title="PropertyWebScraper (module)">PropertyWebScraper</a></span></span>
     &raquo; 
    <span class="title">ScraperController</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: PropertyWebScraper::ScraperController
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="ApplicationController.html" title="PropertyWebScraper::ApplicationController (class)">ApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="PropertyWebScraper::ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next">PropertyWebScraper::ScraperController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/controllers/property_web_scraper/scraper_controller.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Main web controller for the scraper UI and JSON endpoints.</p>

<p>Provides a welcome page, a config endpoint for the Chrome extension, a JSON retrieval endpoint, and an AJAX form submission handler.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ajax_submit-instance_method" title="#ajax_submit (instance method)">#<strong>ajax_submit</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handles the AJAX form submission from the scraper UI.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#config_as_json-instance_method" title="#config_as_json (instance method)">#<strong>config_as_json</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the scraper configuration for realtor.com as JSON.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#retrieve_as_json-instance_method" title="#retrieve_as_json (instance method)">#<strong>retrieve_as_json</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves a property listing by URL and returns it as JSON.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#welcome-instance_method" title="#welcome (instance method)">#<strong>welcome</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Renders the scraper welcome/landing page.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="ajax_submit-instance_method">
  
    #<strong>ajax_submit</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Handles the AJAX form submission from the scraper UI.</p>

<p>Delegates to <span class='object_link'><a href="ListingRetriever.html" title="PropertyWebScraper::ListingRetriever (class)">ListingRetriever</a></span> and renders a JS partial with the result or error message.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/property_web_scraper/scraper_controller.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ajax_submit'>ajax_submit</span>
  <span class='comment'># scraper_name = params[:scraper][:scraper_name]
</span>  <span class='id identifier rubyid_import_url'>import_url</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:import_url</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>

  <span class='id identifier rubyid_listing_retriever'>listing_retriever</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../PropertyWebScraper.html" title="PropertyWebScraper (module)">PropertyWebScraper</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ListingRetriever.html" title="PropertyWebScraper::ListingRetriever (class)">ListingRetriever</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ListingRetriever.html#initialize-instance_method" title="PropertyWebScraper::ListingRetriever#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_import_url'>import_url</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_listing_retriever'>listing_retriever</span><span class='period'>.</span><span class='id identifier rubyid_retrieve'>retrieve</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span>
    <span class='ivar'>@success</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_success'>success</span>
    <span class='ivar'>@listing</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_retrieved_listing'>retrieved_listing</span>
    <span class='ivar'>@image_urls</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_retrieved_listing'>retrieved_listing</span><span class='period'>.</span><span class='id identifier rubyid_image_urls'>image_urls</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@listing_attributes</span> <span class='op'>=</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>reference</span><span class='words_sep'> </span><span class='tstring_content'>title</span><span class='words_sep'> </span><span class='tstring_content'>description</span><span class='words_sep'>
</span><span class='words_sep'>                               </span><span class='tstring_content'>price_string</span><span class='words_sep'> </span><span class='tstring_content'>price_float</span><span class='words_sep'> </span><span class='tstring_content'>area_unit</span><span class='words_sep'> </span><span class='tstring_content'>address_string</span><span class='words_sep'> </span><span class='tstring_content'>currency</span><span class='words_sep'>
</span><span class='words_sep'>                               </span><span class='tstring_content'>country</span><span class='words_sep'> </span><span class='tstring_content'>longitude</span><span class='words_sep'> </span><span class='tstring_content'>latitude</span><span class='words_sep'> </span><span class='tstring_content'>main_image_url</span><span class='words_sep'> </span><span class='tstring_content'>for_rent</span><span class='words_sep'> </span><span class='tstring_content'>for_sale</span><span class='words_sep'>
</span><span class='words_sep'>                               </span><span class='tstring_content'>count_bedrooms</span><span class='words_sep'> </span><span class='tstring_content'>count_bathrooms</span><span class='words_sep'> </span><span class='tstring_end'>)</span></span>
    <span class='comment'># above used to display /views/property_web_scraper/scraper/_retrieve_results.html.erb
</span>  <span class='kw'>else</span>
    <span class='ivar'>@error_message</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_error_message'>error_message</span>
  <span class='kw'>end</span>

  <span class='comment'># begin
</span>  <span class='comment'>#   uri = URI.parse import_url
</span>  <span class='comment'># rescue URI::InvalidURIError =&gt; error
</span>  <span class='comment'>#   uri = &quot;&quot;
</span>  <span class='comment'># end
</span>  <span class='comment'># @listing = {}
</span>  <span class='comment'># if uri.is_a?(URI::HTTP) || uri.is_a?(URI::HTTPS)
</span>  <span class='comment'>#   # find import_host with meta data from db
</span>  <span class='comment'>#   import_host = PropertyWebScraper::ImportHost.find_by_host(uri.host)
</span>  <span class='comment'>#   if import_host
</span>  <span class='comment'>#     @success = true
</span>  <span class='comment'>#     web_scraper = PropertyWebScraper::Scraper.new(import_host.scraper_name)
</span>  <span class='comment'>#     @listing = web_scraper.process_url import_url, import_host
</span>  <span class='comment'>#     @listing_attributes = %w(reference title description
</span>  <span class='comment'>#                              price_string price_float area_unit address_string currency
</span>  <span class='comment'>#                              country longitude latitude main_image_url for_rent for_sale
</span>  <span class='comment'>#                              count_bedrooms count_bathrooms )
</span>  <span class='comment'>#     # above used to display /views/property_web_scraper/scraper/_retrieve_results.html.erb
</span>  <span class='comment'>#   else
</span>  <span class='comment'>#     @success = false
</span>  <span class='comment'>#     @error_message = &lt;&lt;-HTML
</span>  <span class='comment'>#     &lt;div class=&quot;error&quot;&gt;
</span>  <span class='comment'>#     Sorry, unable to retrieve property details from this url.
</span>  <span class='comment'>#       Please try a url from
</span>  <span class='comment'>#     &lt;span&gt;&lt;a href=&quot;https://www.idealista.com&quot;&gt;
</span>  <span class='comment'>#     https://www.idealista.com&lt;/a&gt;&lt;/span&gt;
</span>  <span class='comment'>#     &lt;span&gt;&lt;a href=&quot;http://www.mlslistings.com&quot;&gt;
</span>  <span class='comment'>#     http://www.mlslistings.com&lt;/a&gt;&lt;/span&gt;
</span>  <span class='comment'>#     &lt;span&gt;&lt;a href=&quot;http://www.realtor.com&quot;&gt;
</span>  <span class='comment'>#     http://www.realtor.com&lt;/a&gt;&lt;/span&gt;
</span>  <span class='comment'>#     or
</span>  <span class='comment'>#     &lt;span&gt;&lt;a href=&quot;https://www.zoopla.co.uk&quot;&gt;
</span>  <span class='comment'>#     https://www.zoopla.co.uk&lt;/a&gt;&lt;/span&gt;
</span>  <span class='comment'>#     &lt;/div&gt;
</span>  <span class='comment'>#     HTML
</span>
  <span class='comment'>#   end
</span>  <span class='comment'># else
</span>  <span class='comment'>#   @error_message = &#39;Please enter a valid url&#39;
</span>  <span class='comment'>#   @success = false
</span>  <span class='comment'># end
</span>  <span class='comment'># redirect_to &quot;/scrapers/#{scraper_name}&quot;
</span>  <span class='id identifier rubyid_render'>render</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scraper_retrieve_results</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>layout:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="config_as_json-instance_method">
  
    #<strong>config_as_json</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Returns the scraper configuration for realtor.com as JSON.</p>

<p>Used by the Chrome extension to understand which fields to extract.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/property_web_scraper/scraper_controller.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config_as_json'>config_as_json</span>
  <span class='id identifier rubyid_import_host'>import_host</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../PropertyWebScraper.html" title="PropertyWebScraper (module)">PropertyWebScraper</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ImportHost.html" title="PropertyWebScraper::ImportHost (class)">ImportHost</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_host'>find_by_host</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>www.realtor.com</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_import_host'>import_host</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
      <span class='label'>success:</span> <span class='kw'>false</span><span class='comma'>,</span>
      <span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>import_host</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_scraper_mapping'>scraper_mapping</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../PropertyWebScraper.html" title="PropertyWebScraper (module)">PropertyWebScraper</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ScraperMapping.html" title="PropertyWebScraper::ScraperMapping (class)">ScraperMapping</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_import_host'>import_host</span><span class='period'>.</span><span class='id identifier rubyid_scraper_name'>scraper_name</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_reform_config'>reform_config</span> <span class='id identifier rubyid_scraper_mapping'>scraper_mapping</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='symbol'>:defaultValues</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_reform_config'>reform_config</span> <span class='id identifier rubyid_scraper_mapping'>scraper_mapping</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='symbol'>:textFields</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_reform_config'>reform_config</span> <span class='id identifier rubyid_scraper_mapping'>scraper_mapping</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='symbol'>:booleanFields</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_reform_config'>reform_config</span> <span class='id identifier rubyid_scraper_mapping'>scraper_mapping</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='symbol'>:floatFields</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_reform_config'>reform_config</span> <span class='id identifier rubyid_scraper_mapping'>scraper_mapping</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='symbol'>:intFields</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_reform_config'>reform_config</span> <span class='id identifier rubyid_scraper_mapping'>scraper_mapping</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='lbracket'>[</span><span class='symbol'>:extraFields</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>success:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>key:</span> <span class='id identifier rubyid_import_host'>import_host</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span>
    <span class='label'>config:</span> <span class='id identifier rubyid_config'>config</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="retrieve_as_json-instance_method">
  
    #<strong>retrieve_as_json</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Retrieves a property listing by URL and returns it as JSON.</p>

<p>Expects a <code>url</code> parameter. Returns error JSON when the URL is missing, invalid, or belongs to an unsupported host.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/property_web_scraper/scraper_controller.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_retrieve_as_json'>retrieve_as_json</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>url</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
      <span class='label'>success:</span> <span class='kw'>false</span><span class='comma'>,</span>
      <span class='label'>error_message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Please provide a url</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_uri_from_url'>uri_from_url</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>url</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>URI</span><span class='op'>::</span><span class='const'>HTTP</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>URI</span><span class='op'>::</span><span class='const'>HTTPS</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
      <span class='label'>success:</span> <span class='kw'>false</span><span class='comma'>,</span>
      <span class='label'>error_message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Please provide a valid url</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_import_host'>import_host</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../PropertyWebScraper.html" title="PropertyWebScraper (module)">PropertyWebScraper</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ImportHost.html" title="PropertyWebScraper::ImportHost (class)">ImportHost</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_host'>find_by_host</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_import_host'>import_host</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
      <span class='label'>success:</span> <span class='kw'>false</span><span class='comma'>,</span>
      <span class='label'>error_message:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sorry, the url provided is currently not supported</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>client_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>client_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>5</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_client_id'>client_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>client_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_client_id'>client_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pwb</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_base64'>urlsafe_base64</span><span class='lparen'>(</span><span class='int'>8</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_web_scraper'>web_scraper</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../PropertyWebScraper.html" title="PropertyWebScraper (module)">PropertyWebScraper</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Scraper.html" title="PropertyWebScraper::Scraper (class)">Scraper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Scraper.html#initialize-instance_method" title="PropertyWebScraper::Scraper#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_import_host'>import_host</span><span class='period'>.</span><span class='id identifier rubyid_scraper_name'>scraper_name</span><span class='rparen'>)</span>
  <span class='ivar'>@listing</span> <span class='op'>=</span> <span class='id identifier rubyid_web_scraper'>web_scraper</span><span class='period'>.</span><span class='id identifier rubyid_process_url'>process_url</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_import_host'>import_host</span>

  <span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>success:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>client_id:</span> <span class='id identifier rubyid_client_id'>client_id</span><span class='comma'>,</span>
    <span class='label'>listing:</span> <span class='ivar'>@listing</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="welcome-instance_method">
  
    #<strong>welcome</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Renders the scraper welcome/landing page.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/property_web_scraper/scraper_controller.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_welcome'>welcome</span>
  <span class='comment'># :nocov:
</span>  <span class='comment'># scraper_configs_coll = PropertyWebScraper::ImportHost.all
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Feb 15 12:48:15 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.4.3).
</div>

    </div>
  </body>
</html>